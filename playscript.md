# 全文検索エンジンGroongaを囲む夕べ 4 原稿 「Milkode2013年の歩み」

## 準備:
- mruby Code Search にアクセス出来るか確認
- ノートからもSSLログイン出来るようにしておく
- スライドのサイズ調整

## ページ1: タイトルロゴ

## ページ2: Milkode2013年の歩み
こんばんは、おんがえしと申します。

Rroongaをバックエンドにしたソースコード検索エンジンのMilkodeを作っています。
今日は2013年にMilkodeを作りながら学んだことを発表します。

紹介の前に簡単なアンケートをさせて下さい。

この中でMilkodeのことを知っている、という人がいましたら挙手をお願い出来ますでしょうか？
ありがとうございます。
次に使ったことがある、今も使っているという方がいましたら挙手をお願いします。
ありがとうございます。

それでは始めたいと思います。
最初に自己紹介をさせて下さい。

## ページ3: 自己紹介
おんがえしといいます。
最近はmrubyとopenFrameworksを組み合わせたり、murbyのソースコード検索サイトを作ったりして遊んでいます。

## ページ4: 今日の予定
アジェンダです。

最初にMilkodeの簡単な紹介をしてから、
実際に動かしてみたいと思います。
その後で今年組み込んだGroongaの機能をご紹介します。
最後に来年の抱負について話します。

## ページ5: Milkodeって何？
それでは紹介です。

## ページ6: ソースコードに特化した検索エンジンです
Milkodeはソースコード検索に特化した検索エンジンです。
ソースコードを読む時にGoogle検索みたいに早く検索出来るツールが欲しくて作り始めました。

ローカルやWeb上にあるソースコードを登録して高速に検索することが出来ます。
検索エンジン、ストレージ共にRroongaを利用して作られており、他のデータベースは利用していません。
Ruby + Rroonga だけでどこまで出来るのか？の一例としても参考になるのではと思います。

## ページ7: 特徴は？
特徴です。

一つは高速に検索出来ることです。 100000ファイル位であれば1〜2秒で検索することが出来ます。

次に行指向の検索エンジンであることです。一般的に検索エンジンは「特定の単語を含むファイル」を見つけますが、Milkodeは「特定の単語を含む行」を見つけます。 

また、webアプリとコマンドラインツールを状況に応じて使い分けることが出来ます。

今年入った新機能としてはパッケージ名、拡張子、ディレクトリ名でドリルダウン出来るようになりました。こちらは後でご紹介します。

## ページ8: 2013年の歩み
2013年の出来事を年表にまとめてみました。

色々ありましたが、Milkodeの1.0が出たり、何故かGNUの'Source code reading' related sitesにリンクが貼られていたり、達人出版会の髙橋さんに国際化のパッチを頂いたりと、楽しい一年でした。
そして今日、ひそかにMilkode1.4がリリースされています。

## ページ9: デモ
それでは実際に動いている所をご紹介したいと思います。

```demo.txt
Milkodeをベースに作っている mruby Code Search というサイトがありますのでこちらを使います。

Milkodeのwebアプリを起動するとこのような画面が表示されます。

このサイトにはmrubyに関連するソフトウェアの95のソースコードが集められており、全部で4826ファイルあります。
実際にMilkodeを使った場合は皆さんが読みたいコードを公開、非公開に関わらず集めることが出来ます。
ちなみに国際化にもある程度対応出来ています。

試しに mrb_gc_arena_save で検索してみましょう。
4000ファイル程度なら、これくらいのスピードで検索することが出来ます。

新機能の一つですが、ドリルダウンを使って絞り込み出来るようになりました。
キーワードにマッチしているパッケージが関連の高い順に並べられています。mrubyをクリックしてみます。
するとディレクトリ、もしくは拡張子でさらに絞り込み出来るので.hをクリックします。
mrb_gc_arena_save 関数を定義しているヘッダファイルを見つけることが出来ました。

これも1.4で入った新機能なのですが、GitHubボタンが付きました。
クリックすると今開いているファイルをGitHubで見る事が出来ます。
これはGitHubからcloneしたレポジトリをMilkodeに追加すると自動で付きます。
```

Milkodeを使うと、このように簡単にソースを読む事が出来るようになります。
今回はwebアプリをご紹介しましたが、他にもコマンドラインツールや、emacs用のインターフェースも提供されています。

## ページ10: 今年使ったGroongaの新機能

## ページ11: ドリルダウン

## ページ12: Rroongaでドリルダウンを使うには？

## ページ13: まとめると
詳しくはMilkodeのソースコードをMilkodeを使って見て頂くと嬉しいです。

## ページ14: ひっかかったこと

## ページ15: まとめると

## ページ16: 2014年の抱負
最後に2014年の抱負です。

## ページ17: ありがとうございました
何か気になることがありましたらTwitterやメール、この後の懇親会等で教えて頂ければ幸いです。

どうもありがとうございました。

